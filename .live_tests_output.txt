
   PASS  Tests\Unit\Documentation\DocumentationTest
  ✓ readme documents migration, seeding, and admin workspace commands    0.35s  
  ✓ runbook highlights admin urls and database commands

   PASS  Tests\Unit\ExampleTest
  ✓ that true is true                                                    0.22s  

   PASS  Tests\Unit\Models\ListingMediaPublicUrlTest
  ✓ it returns storage url when stored_path is present                   8.10s  
  ✓ it falls back to preview then url when not stored                    0.29s  

   PASS  Tests\Unit\Policies\ListingPolicyTest
  ✓ it allows admins to administer listings                              0.37s  
  ✓ it prevents subscribers from administering listings                  0.19s  
  ✓ it denies suspended admins from administering listings               0.16s  

   PASS  Tests\Unit\Policies\UserPolicyTest
  ✓ it allows admins to manage user records                              0.17s  
  ✓ it prevents subscribers from administering user records              0.16s  
  ✓ it prevents administrators from deleting or suspending themselves    0.16s  
  ✓ it denies suspended admins from managing user records                0.16s  

   PASS  Tests\Feature\Admin\ListingsPageTest
  ✓ guests are redirected from the listings index                        0.78s  
  ✓ authenticated users can browse, filter, and preview listings        37.98s  
  ✓ admins can suppress and unsuppress listings with audit logging       5.00s  
  ✓ admins can purge all listings                                        2.46s  
  ✓ admins can generate fake listings for testing                        2.17s  

   PASS  Tests\Feature\Auth\AuthenticationTest
  ✓ login screen can be rendered                                         1.10s  
  ✓ users can authenticate using the login screen                        1.12s  
  ✓ admins are redirected to the dashboard after login                   0.96s  
  ✓ users can not authenticate with invalid password                     1.09s  
  ✓ suspended users can not authenticate                                 1.09s  
  ✓ users forced to rotate their password receive a reset alert on fail… 1.07s  
  ✓ users with two factor enabled are redirected to two factor challeng… 0.97s  
  ✓ users can logout                                                     0.17s  

   PASS  Tests\Feature\Auth\EmailVerificationTest
  ✓ email verification screen can be rendered                            0.42s  
  ✓ email can be verified                                                0.28s  
  ✓ email is not verified with invalid hash                              0.25s  
  ✓ already verified user visiting verification link is redirected with… 0.18s  

   PASS  Tests\Feature\Auth\PasswordConfirmationTest
  ✓ confirm password screen can be rendered                              0.65s  

   PASS  Tests\Feature\Auth\PasswordResetTest
  ✓ reset password link screen can be rendered                           0.55s  
  ✓ reset password link can be requested                                 0.87s  
  ✓ reset password screen can be rendered                                1.13s  
  ✓ password can be reset with valid token                               1.37s  

   PASS  Tests\Feature\Auth\RegistrationTest
  ✓ registration screen can be rendered                                  0.74s  
  ✓ new users can register                                               1.17s  

   PASS  Tests\Feature\Auth\TwoFactorChallengeTest
  ✓ two factor challenge redirects to login when not authenticated       0.19s  
  ✓ two factor challenge can be rendered                                 0.94s  

   PASS  Tests\Feature\Console\ListingMediaBackfillTest
  ✓ it queues and syncs media for listings                               0.73s  

   PASS  Tests\Feature\Console\ListingMediaPruneTest
  ✓ it lists and deletes orphan media files                              0.42s  

   PASS  Tests\Feature\DashboardTest
  ✓ guests are redirected from the dashboard                             0.29s  
  ✓ subscribers cannot access the dashboard when an admin exists         0.22s  
  ✓ admins can view the dashboard                                        4.28s  
  ✓ dashboard displays analytics metrics when connected to google analy… 1.40s  
  ✓ dashboard surfaces a helpful message when analytics data is unavail… 1.54s  
  ✓ client tracking snippet is injected when enabled                     1.32s  

   PASS  Tests\Feature\DatabaseSeederTest
  ✓ database seeder creates at least 100 listings                        0.53s  

   PASS  Tests\Feature\ExampleTest
  ✓ returns a successful response                                        1.30s  

   PASS  Tests\Feature\HomepageComprehensiveTest
  ✓ it renders core homepage sections                                    1.26s  
  ✓ it shows a helpful state when idx is enabled but no listings are re… 1.21s  
  ✓ it recovers gracefully when idx fetch throws and still renders the…  1.09s  
  ✓ it falls back to active listings when PoS results are empty and fal… 1.29s  

   PASS  Tests\Feature\HomepageIdxListingsTest
  ✓ it displays idx listings when available                              1.33s  
  ✓ it shows guidance when idx credentials are missing                   1.34s  

   WARN  Tests\Feature\HomepageLiveIdxFeedTest
  - it renders the live idx feed on the homepage → IDX client is not en… 0.39s  

   WARN  Tests\Feature\IdxApiPowerOfSaleSmokeTest
  - it fetches power of sale listings live → IDX client is not enabled.  0.19s  

   FAIL  Tests\Feature\IdxApiSmokeTest
  ⨯ it fetches property data from the idx api                            0.23s  
  ⨯ it fetches media data (images) from the idx api                      0.18s  
  - it service attaches image_url to demo listings → IDX client is not…  0.19s  

   PASS  Tests\Feature\IdxClientFiltersActiveListingsTest
  ✓ it returns only live listings using StandardStatus                   0.21s  

   PASS  Tests\Feature\IdxClientMediaRequestSelectTest
  ✓ it composes Media request with $select and stable $orderby           0.19s  

   PASS  Tests\Feature\IdxClientRequestShapeTest
  ✓ it composes Property request with $select and stable $orderby        0.18s  

   PASS  Tests\Feature\ImportFeedsSourcePriorityTest
  ✓ it upgrades VOW to IDX when both present                             0.23s  
  ✓ it keeps IDX when VOW ingests after                                  0.18s  

   PASS  Tests\Feature\Jobs\BackfillListingMediaTest
  ✓ it dispatches media sync jobs for listings missing media             0.25s  

   PASS  Tests\Feature\Jobs\DownloadListingMediaTest
  ✓ it downloads and stores listing media                                0.27s  

   PASS  Tests\Feature\Jobs\ImportIdxPowerOfSaleTest
  ✓ it imports power of sale listings end-to-end                         0.38s  
  ✓ it updates existing listing matched by board_code + mls_number with… 0.17s  
  ✓ it follows @odata.nextLink pagination when provided                  0.20s  
  ✓ it updates a soft-deleted duplicate instead of inserting a new row   0.18s  
  ✓ it does not append status history when import payload is unchanged   0.18s  

   PASS  Tests\Feature\Jobs\ImportVowPowerOfSaleTest
  ✓ it normalizes long board names to short codes in VOW import          0.19s  

   PASS  Tests\Feature\ListingSchemaTest
  ✓ it creates the listings table with expected columns                  0.17s  
  ✓ it creates the sources table with expected columns                   0.18s  
  ✓ it creates the municipalities table with expected columns            0.18s  
  ✓ it creates the listing status history table with expected columns    0.18s  
  ✓ it creates the saved searches table with expected columns            0.18s  
  ✓ it creates the audit logs table with expected columns                0.18s  
  ✓ it persists listings with related media via factories                0.20s  
  ✓ it maps payload data into canonical listing records                  0.18s  

   PASS  Tests\Feature\Livewire\Admin\Feeds\ButtonsExplicitTest
  ✓ test connection button loads preview and shows notice                1.78s  
  ✓ refresh preview clears cache and reloads preview                     1.47s  
  ✓ idx and vow probe buttons populate status details                    1.54s  

   PASS  Tests\Feature\Livewire\Admin\Feeds\CancelAndDedupTest
  ✓ cancel queued imports removes matching jobs and shows a notice       1.06s  
  ✓ import both does not queue when running or already queued            1.38s  

   PASS  Tests\Feature\Livewire\Admin\Feeds\ImportAllFromComponentTest
  ✓ import all button imports listings and marks progress completed      1.07s  
  ✓ import all shows completed with 0 items when no results are returne… 0.97s  
  ✓ import both shows a visible import queued notice                     1.69s  
  ✓ import both also queues media backfill job                           0.98s  
  ✓ import both imports listings and media                               0.98s  

   PASS  Tests\Feature\Livewire\Admin\Feeds\IndexTest
  ✓ guests are redirected from the data feeds page                       0.18s  
  ✓ subscribers cannot access the data feeds page                        0.22s  
  ✓ admins can view the data feeds page                                  2.89s  

   PASS  Tests\Feature\Livewire\Admin\Listings\ShowTest
  ✓ guests are redirected from the listing detail view                   0.19s  
  ✓ subscribers cannot access the listing detail view when an admin exi… 0.23s  
  ✓ admins can review listing metadata, photos, and change history       2.19s  

   PASS  Tests\Feature\Livewire\Admin\Settings\AnalyticsSettingsTest
  ✓ it renders the analytics settings page for administrators            2.01s  
  ✓ it allows administrators to enable both client and server analytics  2.05s  
  ✓ it requires a property id when enabling server metrics               1.60s  
  ✓ it validates service account credentials structure                   1.70s  
  ✓ it requires a measurement id when any integration toggle is enabled  1.14s  
  ✓ it allows enabling client tracking without server credentials        1.21s  

   PASS  Tests\Feature\Livewire\Admin\Users\IndexTest
  ✓ guests are redirected from the users index                           0.17s  
  ✓ subscribers cannot access the admin users index                      0.21s  
  ✓ admins can browse, update roles, and remove subscriber accounts      6.28s  
  ✓ administrators cannot delete their own accounts via the admin works… 2.34s  
  ✓ admins can invite new subscribers and send reset links               5.98s  
  ✓ admins can trigger password reset emails for existing users          2.83s  
  ✓ admins can force credential rotations for users                      2.38s  
  ✓ admins can suspend and reactivate users                              2.93s  
  ✓ admins cannot trigger additional actions while processing another    4.00s  
  ✓ users index renders a processing indicator for privileged actions    1.31s  
  ✓ the final active admin cannot be demoted or suspended via the works… 3.15s  
  ✓ the first authenticated user is promoted to admin when no admins ex… 2.12s  

   PASS  Tests\Feature\ProcessListingPayloadTest
  ✓ it processes payloads via queued job and normalises data             0.19s  

   PASS  Tests\Feature\PublicListingsTest
  ✓ guests can browse current listings                                   1.08s  
  ✓ listings pagination links are rendered                               1.34s  
  ✓ guests can view a listing detail page                                1.08s  
  ✓ suppressed listings are hidden from the public catalog               2.12s  

   PASS  Tests\Feature\Services\Idx\IdxClientCachingTest
  ✓ it caches listing results to avoid repeated network calls            0.21s  

   PASS  Tests\Feature\Services\Idx\IdxClientTest
  ✓ example                                                              1.42s  

   PASS  Tests\Feature\Services\Idx\ListingTransformerTest
  ✓ it transforms listing payload with sensible fallbacks                0.17s  

   PASS  Tests\Feature\Settings\PasswordUpdateTest
  ✓ password can be updated                                              1.16s  
  ✓ correct password must be provided to update password                 1.13s  

   PASS  Tests\Feature\Settings\ProfileUpdateTest
  ✓ profile page is displayed                                            1.51s  
  ✓ subscriber does not see admin navigation links                       1.51s  
  ✓ profile information can be updated                                   1.11s  
  ✓ email verification status is unchanged when email address is unchan… 1.02s  
  ✓ user can delete their account                                        0.64s  
  ✓ correct password must be provided to delete account                  0.75s  

   PASS  Tests\Feature\Settings\TwoFactorAuthenticationTest
  ✓ two factor settings page can be rendered                             1.41s  
  ✓ two factor settings page requires password confirmation when enable… 0.15s  
  ✓ two factor settings page returns forbidden response when two factor… 0.20s  
  ✓ two factor authentication disabled when confirmation abandoned betw… 0.81s  

   PASS  Tests\Feature\Volt\AdminFeedsPageTest
  ✓ it requires authentication                                           0.19s  
  ✓ it renders admin feeds page                                          1.94s  

   PASS  Tests\Feature\Volt\AdminFeedsQueuedNoticeVisibilityTest
  ✓ it shows queued notice prominently and with at least 10s visibility  1.97s  

   PASS  Tests\Feature\WelcomePageProgressTest
  ✓ it shows milestone progress aligned with the task list               1.22s  
  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\IdxApiSmokeTest > it fetches property data from the…   
  Expecting '' not to be ''.

  at tests/Feature/IdxApiSmokeTest.php:18
     14▕ 
     15▕     $baseUri = rtrim((string) ($idxConfig['base_uri'] ?? ''), '/');
     16▕     $token = $idxConfig['token'] ?? null;
     17▕ 
  ➜  18▕     expect($baseUri)->not->toBe('');
     19▕     expect($token)->not->toBeNull();
     20▕     expect($token)->not->toBe('');
     21▕ 
     22▕     $response = Http::retry(3, 250)

  1   tests/Feature/IdxApiSmokeTest.php:18

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\IdxApiSmokeTest > it fetches media data (images) fr…   
  Expecting '' not to be ''.

  at tests/Feature/IdxApiSmokeTest.php:49
     45▕ 
     46▕     $baseUri = rtrim((string) ($idxConfig['base_uri'] ?? ''), '/');
     47▕     $token = $idxConfig['token'] ?? null;
     48▕ 
  ➜  49▕     expect($baseUri)->not->toBe('');
     50▕     expect($token)->not->toBeNull();
     51▕     expect($token)->not->toBe('');
     52▕ 
     53▕     $response = Http::retry(3, 250)

  1   tests/Feature/IdxApiSmokeTest.php:49


  Tests:    2 failed, 3 skipped, 133 passed (544 assertions)
  Duration: 190.33s

